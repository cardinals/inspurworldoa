@model IEnumerable<InspurOA.Models.Resume>

@{
    ViewBag.Title = "简历管理";
}

<script type="text/javascript" src="~/Scripts/jquery-1.10.2.min.js"></script>
<style type="text/css">
    th {
        text-align: center;
        border: 2px solid;
    }

    td {
        padding: 1px;
        border-left: 1px dashed;
        border-right: 1px dashed;
        border-top: 2px solid;
        border-bottom: 2px solid;
        font-size: 12px;
        height: 30px;
        cursor: pointer;
    }
</style>
<script type="text/javascript">
    $(document).ready(function () {
        $(function () {
            $("[data-toggle='popover']").popover();
        });

        $("button[name='search']").click(function () {
            var queryText = $("input[name='queryText']").val();
            if (queryText != undefined && queryText != null && queryText != "") {

                $.ajax({
                    type: "post",
                    url: "../Resume/search",
                    data: { "query": queryText },
                    dataType: "json",
                    success: function (result) {
                        if (result != undefined && result != null) {
                            $("#GridList tbody").html("");
                            for (var i = 0; i < result.length; i++) {
                                $("#GridList tbody").append(
                                    "<tr>" +
					                    "<td>" +
                                            result[i].PersonalInformation +
                                        "</td>" +
                                        "<td>" +
                                            result[i].CareerObjective +
                                        "</td>" +
                                        "<td>" +
                                            result[i].SelfAssessment +
                                        "</td>" +
                                        "<td>" +
                                            result[i].WorkExperience +
                                        "</td>" +
                                        "<td>" +
                                            result[i].ProjectExperience +
                                        "</td>" +
                                        "<td>" +
                                            result[i].Education +
                                        "</td>" +
                                     "</tr>");
                            }
                        }
                    },
                    error: function (e) {
                        alert(e.responseText);
                    }

                });
            }
        });
    });
</script>

<div class="col-sm-9">
    @Html.ActionLink("上传简历", "Create", null, new { @class = "btn btn-primary" })
</div>

<div class="col-sm-3">
    <div class="input-group">
        <input type="text" name="queryText" class="form-control">
        <span class="input-group-btn">
            <button class="btn btn-default" name="search" type="button">搜索</button>
        </span>
    </div>
</div>
<div style="width:100%;height:calc(100% - 115px);overflow:auto;border:1px solid;border-radius:4px;margin-top:3px;">
    <table id="GridList" class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.PersonalInformation)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.CareerObjective)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.SelfAssessment)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.WorkExperience)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ProjectExperience)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Education)
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @if (@Html.DisplayFor(modelItem => item.PersonalInformation).ToHtmlString().Length > 50)
                        {
                            @Html.DisplayFor(modelItem => item.PersonalInformation).ToHtmlString().Substring(0, 50)
                            <button type="button" class="btn btn-xs" title="详细信息"
                                    data-container="body" data-toggle="popover" data-placement="right"
                                    data-content="@Html.DisplayFor(modelItem => item.PersonalInformation)">
                                ...
                            </button>
                        }
                        else
                        {
                            @Html.DisplayFor(modelItem => item.PersonalInformation)
                        }
                    </td>
                    <td>
                        @if (@Html.DisplayFor(modelItem => item.CareerObjective).ToHtmlString().Length > 50)
                        {
                            @Html.DisplayFor(modelItem => item.CareerObjective).ToHtmlString().Substring(0, 50)
                            <button type="button" class="btn   btn-xs" title="详细信息"
                                    data-container="body" data-toggle="popover" data-placement="right"
                                    data-content="@Html.DisplayFor(modelItem => item.CareerObjective)">
                                ...
                            </button>
                        }
                        else
                        {
                            @Html.DisplayFor(modelItem => item.CareerObjective)
                        }
                    </td>
                    <td>
                        @if (@Html.DisplayFor(modelItem => item.SelfAssessment).ToHtmlString().Length > 50)
                        {
                            @Html.DisplayFor(modelItem => item.SelfAssessment).ToHtmlString().Substring(0, 50)
                            <button type="button" class="btn   btn-xs" title="详细信息"
                                    data-container="body" data-toggle="popover" data-placement="right"
                                    data-content="@Html.DisplayFor(modelItem => item.SelfAssessment)">
                                ...
                            </button>
                        }
                        else
                        {
                            @Html.DisplayFor(modelItem => item.SelfAssessment)
                        }
                    </td>
                    <td>
                        @if (@Html.DisplayFor(modelItem => item.WorkExperience).ToHtmlString().Length > 50)
                        {
                            @Html.DisplayFor(modelItem => item.WorkExperience).ToHtmlString().Substring(0, 50)
                            <button type="button" class="btn   btn-xs" title="详细信息"
                                    data-container="body" data-toggle="popover" data-placement="left"
                                    data-content="@Html.DisplayFor(modelItem => item.WorkExperience)">
                                ...
                            </button>
                        }
                        else
                        {
                            @Html.DisplayFor(modelItem => item.WorkExperience)
                        }
                    </td>
                    <td>
                        @if (@Html.DisplayFor(modelItem => item.ProjectExperience).ToHtmlString().Length > 50)
                        {
                            @Html.DisplayFor(modelItem => item.ProjectExperience).ToHtmlString().Substring(0, 50)
                            <button type="button" class="btn   btn-xs" title="详细信息"
                                    data-container="body" data-toggle="popover" data-placement="left"
                                    data-content="@Html.DisplayFor(modelItem => item.ProjectExperience)">
                                ...
                            </button>
                        }
                        else
                        {
                            @Html.DisplayFor(modelItem => item.ProjectExperience)
                        }
                    </td>
                    <td>
                        @if (@Html.DisplayFor(modelItem => item.Education).ToHtmlString().Length > 50)
                        {
                            @Html.DisplayFor(modelItem => item.Education).ToHtmlString().Substring(0, 50)
                            <button type="button" class="btn   btn-xs" title="详细信息"
                                    data-container="body" data-toggle="popover" data-placement="left"
                                    data-content="@Html.DisplayFor(modelItem => item.Education)">
                                ...
                            </button>
                        }
                        else
                        {
                            @Html.DisplayFor(modelItem => item.Education)
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
@Html.Partial("PagInation")